import React, { useState, useEffect } from 'react';
import { 
  Github, 
  Linkedin, 
  Mail, 
  ExternalLink, 
  ChevronDown, 
  Code, 
  Palette, 
  Globe, 
  Cpu, 
  Send,
  User,
  Layers,
  Briefcase,
  Trophy,
  Target,
  Zap
} from 'lucide-react';

// 網球拍與球的裝飾 SVG 組件
const TennisIcon = ({ className }) => (
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
    <circle cx="12" i="12" r="10" />
    <path d="M12 2a10 10 0 0 1 0 20" />
    <path d="M2 12a10 10 0 0 1 20 0" />
  </svg>
);

// 導航組件
const Navbar = () => {
  const [scrolled, setScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const navLinks = [
    { name: '關於我', id: 'about' },
    { name: '技能', id: 'skills' },
    { name: '作品集', id: 'portfolio' },
    { name: '聯絡我', id: 'contact' },
  ];

  return (
    <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'bg-slate-900/80 backdrop-blur-md py-4 shadow-lg' : 'bg-transparent py-6'}`}>
      <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
        <div className="text-2xl font-bold bg-gradient-to-r from-lime-400 to-emerald-400 bg-clip-text text-transparent cursor-pointer flex items-center gap-2">
          <TennisIcon className="w-8 h-8 text-lime-400 animate-spin-slow" />
          <span>MATCH POINT.</span>
        </div>
        <div className="hidden md:flex space-x-8">
          {navLinks.map((link) => (
            <button 
              key={link.id}
              onClick={() => document.getElementById(link.id).scrollIntoView({ behavior: 'smooth' })}
              className="text-gray-300 hover:text-white transition-colors text-sm font-medium tracking-wider"
            >
              {link.name}
            </button>
          ))}
        </div>
      </div>
    </nav>
  );
};

// 打字效果組件
const Typewriter = ({ texts }) => {
  const [index, setIndex] = useState(0);
  const [subIndex, setSubIndex] = useState(0);
  const [reverse, setReverse] = useState(false);

  useEffect(() => {
    if (subIndex === texts[index].length + 1 && !reverse) {
      setTimeout(() => setReverse(true), 2000);
      return;
    }

    if (subIndex === 0 && reverse) {
      setReverse(false);
      setIndex((prev) => (prev + 1) % texts.length);
      return;
    }

    const timeout = setTimeout(() => {
      setSubIndex((prev) => prev + (reverse ? -1 : 1));
    }, reverse ? 75 : 150);

    return () => clearTimeout(timeout);
  }, [subIndex, index, reverse, texts]);

  return (
    <span className="text-lime-400">
      {`${texts[index].substring(0, subIndex)}`}
      <span className="animate-pulse">|</span>
    </span>
  );
};

// 技能標籤組件
const SkillBadge = ({ icon: Icon, name, color }) => (
  <div className="flex flex-col items-center p-6 bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-lime-500/50 transition-all duration-300 group">
    <div className={`p-4 rounded-xl ${color} bg-opacity-10 mb-4 group-hover:scale-110 transition-transform`}>
      <Icon size={28} className={color.replace('bg-', 'text-')} />
    </div>
    <span className="text-gray-300 font-medium">{name}</span>
  </div>
);

// 作品卡片組件
const ProjectCard = ({ title, category, img, description }) => (
  <div className="group relative overflow-hidden rounded-2xl bg-slate-800 border border-slate-700">
    <div className="aspect-video w-full overflow-hidden">
      <img 
        src={img} 
        alt={title} 
        className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
      />
    </div>
    <div className="absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
      <p className="text-lime-400 text-sm font-semibold mb-2">{category}</p>
      <h3 className="text-xl font-bold text-white mb-2">{title}</h3>
      <p className="text-gray-300 text-sm mb-4 line-clamp-2">{description}</p>
      <div className="flex space-x-4">
        <button className="flex items-center text-white text-sm bg-lime-600 px-4 py-2 rounded-lg hover:bg-lime-500 transition-colors">
          <ExternalLink size={16} className="mr-2" /> 預覽專案
        </button>
      </div>
    </div>
  </div>
);

export default function App() {
  const [formData, setFormData] = useState({ name: '', email: '', message: '' });
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleSubmit = (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    setTimeout(() => {
      setIsSubmitting(false);
      alert('訊息已送出！就像一記完美的發球。');
      setFormData({ name: '', email: '', message: '' });
    }, 1500);
  };

  return (
    <div className="min-h-screen bg-slate-900 text-slate-100 selection:bg-lime-500/30 font-sans">
      <Navbar />

      {/* Hero Section */}
      <section className="relative h-screen flex items-center justify-center overflow-hidden">
        {/* 背景光暈微調為網球綠 */}
        <div className="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none">
          <div className="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-500 rounded-full blur-[120px]"></div>
          <div className="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-lime-500 rounded-full blur-[120px]"></div>
        </div>
        
        <div className="relative z-10 text-center px-6">
          <div className="inline-flex items-center gap-2 bg-slate-800/50 border border-slate-700 px-4 py-2 rounded-full mb-6 animate-fade-in">
            <Trophy size={16} className="text-lime-400" />
            <p className="text-lime-400 font-mono tracking-widest text-xs uppercase font-bold">前網球校隊選手 × 全端開發者</p>
          </div>
          <h1 className="text-5xl md:text-7xl font-extrabold mb-6 tracking-tight">
            精準 <span className="bg-gradient-to-r from-blue-400 to-lime-400 bg-clip-text text-transparent text-shadow-glow">控球</span> 與代碼
          </h1>
          <h2 className="text-2xl md:text-3xl font-light text-gray-400 h-10">
            我將 <Typewriter texts={['ACE 球的精準', '底線抽球的韌性', '網前截擊的果斷']} /> 帶入產品開發
          </h2>
          <div className="mt-12 flex justify-center space-x-6">
            <button 
              onClick={() => document.getElementById('portfolio').scrollIntoView({ behavior: 'smooth' })}
              className="bg-lime-600 hover:bg-lime-500 text-slate-900 px-8 py-3 rounded-full font-bold transition-all shadow-lg shadow-lime-600/20"
            >
              進入賽局 (查看作品)
            </button>
            <button 
              onClick={() => document.getElementById('contact').scrollIntoView({ behavior: 'smooth' })}
              className="border border-slate-600 hover:border-white text-white px-8 py-3 rounded-full font-bold transition-all"
            >
              聯繫我
            </button>
          </div>
          <div className="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce cursor-pointer" onClick={() => document.getElementById('about').scrollIntoView({ behavior: 'smooth' })}>
            <ChevronDown className="text-gray-500" />
          </div>
        </div>
      </section>

      {/* About Section */}
      <section id="about" className="py-24 bg-slate-800/30 relative">
        <div className="max-w-5xl mx-auto px-6">
          <div className="flex flex-col md:flex-row items-center gap-12">
            <div className="w-64 h-80 shrink-0 rounded-2xl overflow-hidden border-4 border-slate-700 shadow-2xl relative group">
              <img 
                src="https://images.unsplash.com/photo-1595435064219-c800bc791901?q=80&w=1000&auto=format&fit=crop" 
                alt="Tennis Athlete" 
                className="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500"
              />
              <div className="absolute inset-0 bg-lime-600/20 mix-blend-overlay"></div>
            </div>
            <div className="flex-1">
              <div className="flex items-center space-x-2 mb-4">
                <Target size={20} className="text-lime-400" />
                <span className="text-lime-400 font-bold uppercase tracking-widest text-sm">Mental Toughness</span>
              </div>
              <h3 className="text-3xl font-bold mb-6 text-white">從網球場到終端機：追求極致的穩定與精準</h3>
              <p className="text-gray-400 leading-relaxed mb-6">
                過去網球校隊的訓練賦予了我卓越的**抗壓性**與**專注度**。在烈日下的底線拉鋸戰教會我「耐心」；在關鍵分上的發球教會我「果斷」。
                現在，我將這些特質轉化為代碼中的嚴謹邏輯，致力於為用戶打造如完美抽球般流暢的數字體驗。
              </p>
              <div className="grid grid-cols-2 gap-4">
                <div className="bg-slate-800/50 p-4 rounded-xl border-l-4 border-lime-500">
                  <p className="text-lime-400 font-bold text-2xl flex items-center gap-2">
                    <Zap size={20}/> 爆發力
                  </p>
                  <p className="text-xs text-gray-500 uppercase mt-1">高效的敏捷開發</p>
                </div>
                <div className="bg-slate-800/50 p-4 rounded-xl border-l-4 border-blue-500">
                  <p className="text-blue-400 font-bold text-2xl flex items-center gap-2">
                    <Trophy size={20}/> 韌性
                  </p>
                  <p className="text-xs text-gray-500 uppercase mt-1">解決複雜技術挑戰</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Skills Section */}
      <section id="skills" className="py-24">
        <div className="max-w-7xl mx-auto px-6">
          <div className="text-center mb-16">
            <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">核心戰力</h2>
            <div className="w-20 h-1 bg-lime-500 mx-auto rounded-full"></div>
          </div>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-6">
            <SkillBadge icon={Globe} name="前端開發" color="bg-blue-500" />
            <SkillBadge icon={Cpu} name="後端架構" color="bg-purple-500" />
            <SkillBadge icon={Palette} name="UI/UX 設計" color="bg-pink-500" />
            <SkillBadge icon={Layers} name="雲端服務" color="bg-orange-500" />
          </div>
        </div>
      </section>

      {/* Portfolio Section */}
      <section id="portfolio" className="py-24 bg-slate-800/30">
        <div className="max-w-7xl mx-auto px-6">
          <div className="flex justify-between items-end mb-16">
            <div>
              <div className="flex items-center space-x-2 mb-2">
                <Briefcase size={16} className="text-lime-400" />
                <span className="text-lime-400 font-bold uppercase tracking-widest text-sm">Portfolio</span>
              </div>
              <h2 className="text-3xl md:text-4xl font-bold text-white">實戰專案</h2>
            </div>
            <button className="text-gray-400 hover:text-white flex items-center transition-colors">
              查看全部 <ChevronDown size={20} className="-rotate-90 ml-1" />
            </button>
          </div>
          
          <div className="grid md:grid-cols-3 gap-8">
            <ProjectCard 
              title="智能網球訓練分析儀" 
              category="AI & Sport" 
              description="結合電腦視覺技術，實時分析發球動作與落點精準度的數據系統。"
              img="https://images.unsplash.com/photo-1554068865-24cecd4e34b8?q=80&w=800&auto=format&fit=crop"
            />
            <ProjectCard 
              title="場地預約 SaaS" 
              category="Management System" 
              description="為運動俱樂部開發的高效預約管理系統，具備自動化排班與即時通知功能。"
              img="https://images.unsplash.com/photo-1622279457486-62dcc4a4977b?q=80&w=800&auto=format&fit=crop"
            />
            <ProjectCard 
              title="賽事即時看板" 
              category="Web Development" 
              description="支撐萬人同時在線的即時比分與數據統計平台。"
              img="https://images.unsplash.com/photo-1599586120429-48281b6f0ece?q=80&w=800&auto=format&fit=crop"
            />
          </div>
        </div>
      </section>

      {/* Contact Section */}
      <section id="contact" className="py-24">
        <div className="max-w-5xl mx-auto px-6">
          <div className="bg-slate-800 rounded-3xl overflow-hidden shadow-2xl flex flex-col md:flex-row border border-slate-700/50">
            <div className="p-12 md:w-2/5 bg-lime-600 text-slate-900">
              <h2 className="text-3xl font-bold mb-6 italic uppercase tracking-tighter">Ready for a Match?</h2>
              <p className="mb-8 opacity-90 text-lg font-medium">
                準備好開始新的對局了嗎？無論是專案合作還是網球邀約，我都非常期待。
              </p>
              <div className="space-y-6">
                <div className="flex items-center space-x-4">
                  <div className="bg-slate-900/10 p-3 rounded-lg"><Mail size={20} /></div>
                  <span className="font-semibold">tennis.dev@example.com</span>
                </div>
                <div className="flex items-center space-x-4">
                  <div className="bg-slate-900/10 p-3 rounded-lg"><Linkedin size={20} /></div>
                  <span className="font-semibold">linkedin.com/in/tennisdev</span>
                </div>
                <div className="flex items-center space-x-4">
                  <div className="bg-slate-900/10 p-3 rounded-lg"><Github size={20} /></div>
                  <span className="font-semibold">github.com/tennisplayer-dev</span>
                </div>
              </div>
            </div>
            
            <div className="p-12 md:w-3/5">
              <form onSubmit={handleSubmit} className="space-y-6">
                <div>
                  <label className="block text-sm font-medium text-gray-400 mb-2 uppercase tracking-widest text-xs">Name</label>
                  <input 
                    type="text" 
                    required
                    className="w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-lime-500 transition-colors"
                    placeholder="您的名字"
                    value={formData.name}
                    onChange={e => setFormData({...formData, name: e.target.value})}
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-400 mb-2 uppercase tracking-widest text-xs">Email</label>
                  <input 
                    type="email" 
                    required
                    className="w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-lime-500 transition-colors"
                    placeholder="email@example.com"
                    value={formData.email}
                    onChange={e => setFormData({...formData, email: e.target.value})}
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-400 mb-2 uppercase tracking-widest text-xs">Message</label>
                  <textarea 
                    rows="4" 
                    required
                    className="w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-lime-500 transition-colors"
                    placeholder="告訴我專案內容，或是邀我打場球..."
                    value={formData.message}
                    onChange={e => setFormData({...formData, message: e.target.value})}
                  ></textarea>
                </div>
                <button 
                  type="submit" 
                  disabled={isSubmitting}
                  className="w-full bg-lime-600 hover:bg-lime-500 text-slate-900 font-bold py-4 rounded-xl transition-all flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed group shadow-lg shadow-lime-600/20"
                >
                  {isSubmitting ? '送出中...' : (
                    <>
                      <span className="uppercase tracking-widest">發球 (送出)</span>
                      <TennisIcon className="w-5 h-5 group-hover:rotate-45 transition-transform" />
                    </>
                  )}
                </button>
              </form>
            </div>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-12 border-t border-slate-800">
        <div className="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0 text-gray-500 text-sm">
          <p>© 2024 MATCH POINT. Powered by Tennis Spirit.</p>
          <div className="flex space-x-6">
            <a href="#" className="hover:text-white transition-colors">Game</a>
            <a href="#" className="hover:text-white transition-colors">Set</a>
            <a href="#" className="hover:text-white transition-colors">Match</a>
          </div>
          <div className="flex space-x-4">
            <Github size={20} className="hover:text-white cursor-pointer" />
            <Linkedin size={20} className="hover:text-white cursor-pointer" />
            <Mail size={20} className="hover:text-white cursor-pointer" />
          </div>
        </div>
      </footer>
      
      <style>{`
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
          animation: spin-slow 8s linear infinite;
        }
        .text-shadow-glow {
          text-shadow: 0 0 20px rgba(163, 230, 53, 0.4);
        }
      `}</style>
    </div>
  );
}
